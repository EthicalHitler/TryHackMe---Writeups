## Basic Pentesting - TryHackMe 

> Written by [Ethical Hitler](https://github.com/EthicalHitler) :fire:

### Description

A simple and interesting CTF room to practice pentesting.

***

#### Task 1 : Web App Testing and Privilege Escalation

**1.Deploy the machine and connect to network**

```
Done
```

***

**2.Find the services exposed by the machine**

To enumerate the machine, use Nmap to scan for open ports in the machine. If you need any alternate for nmap , use [Rustscan](https://github.com/RustScan/RustScan) which is a great tool for finding ports and It is also faster than nmap.

**Nmap**

```bash
$ nmap -sC -sV -oN initialScan <machineIP>
```

![nmapScan]( Assets/basicPentestImages/ctf1.PNG)

**Rustscan**

![rustscan]( Assets/basicPentestImages/ctf2.PNG)

***

**3. What is the name of the hidden directory on the web server(enter name without /)?**

Now we see there is an website running on `port 80` , so we can check any directories are hidden in the server.

For this directory bruteforcing , I generally use [gobuster](https://github.com/OJ/gobuster) with a directory-list-2.3-medium.txt wordlist.

```bash
$ gobuster dir -u <url> -w <wordlist>
```

![gobuster]( Assets/basicPentestImages/ctf3.PNG)

Woah! so there is a hidden directory named `Development` . Lets check what's inside.

![hidden]( Assets/basicPentestImages/ctf4.PNG)

Great, Now we have 2 text files present in that directory. Now we will download that and view in our local machine.

**j.txt**

![jtext]( Assets/basicPentestImages/ctf5.PNG)

**dev.txt**

![dev]( Assets/basicPentestImages/ctf6.PNG)

Next step, we knew the information about SMB is configured so there is better tool called [enum4linux](https://github.com/CiscoCXSecurity/enum4linux) which can be used to enumerate SMB shares.

```bash
$ enum4linux <machineIP>
```

![enum4linux]( Assets/basicPentestImages/ctf7.PNG)

Now we have 2 potential username `Kay and Jay`,use this usernames to bruteforce SSH login by using hydra

***

**4. User brute-forcing to find the username & password**

Let's use Hydra tool to crack the password.

```bash
$ hydra -l jan -P rockyou.txt <machineIP> ssh	
```

![hydraLogin]( Assets/basicPentestImages/ctf9.PNG)

***

**5. What is the username?**

```
Jan
```

***

**6. What is the password?**

```
armando
```

***

**7. What service do you use to access the server(answer in abbreviation in all caps)?**

```bash
SSH
```

***

**8. Enumerate the machine to find any vectors for privilege escalation**

![sshJan]( Assets/basicPentestImages/ctf8.PNG)

So we logged in to the user successfully. Now lets dig into the machine to find any possible spots to escalate.

![permissionDenied]( Assets/basicPentestImages/ctf10.PNG)

So there is a password backup file in Kay's folder but it says permission denied. Hmm! When we check the hidden files we have a `.ssh` folder in which we have a `id_rsa` file, Grab it!.

![idRSA]( Assets/basicPentestImages/ctf11.PNG)

Now its time for `ssh2john` , use it to convert into a hash so that johnTheRipper can break it.

```bash
$ python3 ssh2john.py sshKey.txt > hash
```

![ssh2john]( Assets/basicPentestImages/ctf12.PNG)

Importing into Johnny - A GUI based johnTheRipper Tool to crack the password.

![johnny]( Assets/basicPentestImages/ctf13.PNG)

***

**9. What is the name of the other user you found(all lower case)?**

```
kay
```

***

**10. If you have found another user, what can you do with this information?**

Now we have Kay's SSH password , we can try to login into his account.

![kay]( Assets/basicPentestImages/ctf14.PNG)

***

**11. What is the final password you obtain?**

```
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
```

***

